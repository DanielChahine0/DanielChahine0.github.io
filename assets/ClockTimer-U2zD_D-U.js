import{c as R,j as e,r as t,m as N,P,N as D,h as M,i as E,F as z}from"./index-bkafppFb.js";import{P as _}from"./play-CaBEMRgR.js";import{R as L}from"./rotate-ccw-DROScyax.js";import{M as $}from"./minus-BExjOwWz.js";import{P as O}from"./plus-660_v-6Q.js";const F=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],q=R("pause",F);function J({currentTime:c,formatTime:d,formatDate:s}){return e.jsxs("div",{className:"space-y-2 flex flex-col items-center",children:[e.jsx("div",{className:"text-5xl font-mono font-bold text-primary animate-pulse","aria-label":"Current time",children:d(c)}),e.jsx("div",{className:"text-base text-muted-foreground",children:s(c)})]})}function U(){const c=[{name:"New York",tz:"America/New_York"},{name:"London",tz:"Europe/London"},{name:"Tokyo",tz:"Asia/Tokyo"},{name:"Sydney",tz:"Australia/Sydney"}],[d,s]=t.useState(["America/New_York","Europe/London"]),x=n=>{s(l=>l.includes(n)?l.filter(m=>m!==n):[...l,n])},r=n=>new Date().toLocaleTimeString("en-US",{hour12:!0,hour:"numeric",minute:"2-digit",second:"2-digit",timeZone:n});return e.jsxs("section",{className:"mt-8 bg-card rounded-lg p-4 shadow-md",children:[e.jsx("h3",{className:"text-xl font-semibold mb-3 text-center",children:"World Clock"}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-3",children:c.map(n=>e.jsx("button",{onClick:()=>x(n.tz),className:`px-3 py-1 rounded-md text-sm font-medium border transition-colors ${d.includes(n.tz)?"bg-primary text-white border-primary":"bg-white text-primary border-primary/30 hover:bg-primary/10"}`,"aria-pressed":d.includes(n.tz),children:n.name},n.tz))}),e.jsx("div",{className:"space-y-2",children:d.map(n=>{const l=c.find(m=>m.tz===n);return l?e.jsxs("div",{className:"flex justify-between items-center bg-muted rounded px-3 py-2",children:[e.jsx("span",{className:"font-medium text-foreground",children:l.name}),e.jsx("span",{className:"font-mono text-lg text-foreground",children:r(n)})]},n):null})})]})}const T="https://cdn.pixabay.com/audio/2022/07/26/audio_124bfae1b6.mp3",Y="https://cdn.pixabay.com/audio/2021/08/04/audio_12b0c7443c.mp3";function W(){const[c,d]=t.useState(()=>{try{const a=localStorage.getItem("alarms");return a?JSON.parse(a):[]}catch{return[]}}),[s,x]=t.useState({time:"",label:"",sound:"default"}),[r,n]=t.useState(!1),[l,m]=t.useState(!1),f=t.useRef(null);t.useEffect(()=>{(async()=>{try{const i=new(window.AudioContext||window.webkitAudioContext);i.state==="suspended"&&await i.resume(),m(!0),i.close()}catch{m(!1)}})(),Notification.permission==="default"&&Notification.requestPermission()},[]),t.useEffect(()=>{localStorage.setItem("alarms",JSON.stringify(c))},[c]),t.useEffect(()=>{const a=setInterval(()=>{const i=new Date,h=i.getHours().toString().padStart(2,"0")+":"+i.getMinutes().toString().padStart(2,"0");c.forEach((u,p)=>{if(h===u.time){const j=`${u.time}-${u.id||p}-${i.getDate()}-${i.getMonth()}`,g=JSON.parse(localStorage.getItem("triggeredAlarms")||"[]");if(!g.includes(j)){g.push(j),localStorage.setItem("triggeredAlarms",JSON.stringify(g)),Notification.permission==="default"&&Notification.requestPermission(),Notification.permission==="granted"&&new Notification(u.label||"Alarm",{body:"Your alarm is ringing!",icon:"/favicon.ico"});const v=new Audio(u.sound);v.volume=.7,v.play().catch(()=>{alert(u.label||"Alarm is ringing!")}),navigator.vibrate&&navigator.vibrate([200,100,200]),u.recurring||d(o=>o.filter((S,A)=>A!==p))}}});const b=JSON.parse(localStorage.getItem("triggeredAlarms")||"[]"),y=new Date;y.setDate(y.getDate()-1);const I=b.filter(u=>{const p=u.split("-");if(p.length>=4){const j=parseInt(p[2]),g=parseInt(p[3]);return j>=y.getDate()&&g>=y.getMonth()}return!1});localStorage.setItem("triggeredAlarms",JSON.stringify(I))},1e3);return()=>clearInterval(a)},[c]);const C=t.useCallback(()=>{if(s.time){const a=s.sound==="default"?T:s.sound;d(i=>[...i,{...s,sound:a,recurring:r,id:Date.now()+Math.random()}]),x({time:"",label:"",sound:"default"}),setTimeout(()=>f.current?.focus(),100)}},[s,r]),w=t.useCallback(a=>{window.confirm("Remove this alarm?")&&d(c.filter((i,h)=>h!==a))},[c]),k=t.useCallback(a=>{const i=new Audio(a||T);i.volume=.7,i.play().then(()=>m(!0)).catch(()=>{alert("Please interact with the page first to enable audio playback")})},[]);return e.jsxs("section",{className:"mt-8 bg-card rounded-lg p-6 shadow-lg",children:[e.jsx("h3",{className:"text-2xl font-bold mb-6 text-center",children:"Alarm"}),!l&&e.jsxs("div",{className:"mb-4 p-3 bg-yellow-100 border border-yellow-300 rounded-lg text-yellow-800 text-sm text-center",children:[e.jsx("strong",{children:"Note:"})," Audio may not work until you interact with the page. Click the test sound button (ðŸ”Š) to enable audio playback."]}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4 justify-center",children:[e.jsx("input",{ref:f,type:"time",value:s.time,onChange:a=>x({...s,time:a.target.value}),className:"px-4 py-2 rounded-md text-center shadow-sm border border-input focus:outline-none",placeholder:"Set Time","aria-label":"Set alarm time"}),e.jsx("input",{type:"text",placeholder:"Label",value:s.label,onChange:a=>x({...s,label:a.target.value}),className:"px-4 py-2 rounded-md text-center shadow-sm border border-input focus:outline-none","aria-label":"Alarm label"}),e.jsxs("select",{value:s.sound,onChange:a=>x({...s,sound:a.target.value}),className:"px-4 py-2 rounded-md shadow-sm border border-input focus:outline-none","aria-label":"Alarm sound",children:[e.jsx("option",{value:"default",children:"Default"}),e.jsx("option",{value:T,children:"Beep"}),e.jsx("option",{value:Y,children:"Chime"})]}),e.jsx("button",{type:"button",onClick:()=>k(s.sound==="default"?T:s.sound),className:"px-3 py-2 bg-primary text-white rounded-md hover:bg-primary/90 shadow-sm text-sm focus:outline-none",title:"Test sound","aria-label":"Test alarm sound",children:"ðŸ”Š"}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:a=>n(a.target.checked),className:"w-4 h-4 focus:outline-none accent-primary","aria-label":"Recurring alarm"}),e.jsx("span",{className:"text-sm",children:"Recurring"})]}),e.jsx("button",{onClick:C,className:"px-6 py-2 bg-primary text-white rounded-md hover:bg-primary/60 shadow-md transition-transform transform hover:scale-105 focus:outline-none","aria-label":"Add alarm",children:"Add Alarm"})]}),e.jsx("ul",{className:"space-y-4 mt-4",children:c.map((a,i)=>e.jsxs(N.li,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"flex justify-between items-center bg-muted px-6 py-4 rounded-lg shadow-md",role:"listitem",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-lg text-primary",children:a.time}),e.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:a.label||"No Label"}),a.recurring&&e.jsx("span",{className:"ml-2 text-xs text-green-600",children:"(Recurring)"})]}),e.jsx("button",{onClick:()=>w(i),className:"text-red-500 hover:text-red-600 focus:outline-none","aria-label":"Remove alarm",children:"Remove"})]},a.id||i))})]})]})}function B(){const[c,d]=t.useState(25),[s,x]=t.useState(0),[r,n]=t.useState(!1),[l,m]=t.useState(1500),[f,C]=t.useState(1500),[w,k]=t.useState(0),[a,i]=t.useState(!1),h=t.useRef(null),b=t.useRef(null);t.useEffect(()=>(r&&l>0?h.current=setInterval(()=>{m(o=>o<=1?(n(!1),0):o-1)},1e3):clearInterval(h.current),()=>clearInterval(h.current)),[r,l]),t.useEffect(()=>{l===0&&b.current&&(b.current.volume=.7,b.current.play().catch(()=>{alert("Timer finished!")}),navigator.vibrate&&navigator.vibrate([200,100,200]))},[l]),t.useEffect(()=>{d(Math.floor(l/60)),x(l%60)},[l]);const y=()=>{n(!r)},I=()=>{n(!1),m(f)},u=t.useCallback(o=>{if(!r){const S=Math.max(1,Math.floor(l/60)+o),A=Math.max(60,S*60);m(A),C(A)}},[r,l]),p=t.useCallback(o=>{if(!r){const S=Math.max(60,o*60);m(S),C(S),i(!1)}},[r]),j=t.useCallback(o=>{k(o.target.value.replace(/[^0-9]/g,""))},[]),g=t.useCallback(()=>{const o=Math.max(1,parseInt(w,10)||0);p(o),k(0),i(!1)},[w,p]),v=t.useMemo(()=>f>0?(f-l)/f*100:0,[f,l]);return e.jsxs(N.section,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},className:"bg-card rounded-lg p-8 shadow-md flex flex-col gap-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4 text-center",children:"Pomodoro Timer"}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs(N.div,{animate:{scale:r?1.08:1},transition:{type:"spring",stiffness:200,damping:10},className:"text-6xl font-mono font-bold text-green-600 mb-2 select-none","aria-label":"Timer countdown",children:[String(c).padStart(2,"0"),":",String(s).padStart(2,"0")]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2","aria-label":"Timer progress",children:e.jsx(N.div,{className:"bg-green-500 h-2 rounded-full",animate:{width:`${v}%`},transition:{duration:1},style:{width:`${v}%`}})})]}),e.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[e.jsxs("button",{onClick:y,"aria-label":r?"Pause timer":"Start timer",className:`flex items-center gap-2 px-6 py-3 rounded-md text-white font-medium transition-colors ${r?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"}`,children:[r?e.jsx(q,{size:20}):e.jsx(_,{size:20}),r?"Pause":"Start"]}),e.jsxs("button",{onClick:I,"aria-label":"Reset timer",className:"flex items-center gap-2 px-6 py-3 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors",children:[e.jsx(L,{size:20}),"Reset"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("button",{onClick:()=>u(-5),disabled:r,"aria-label":"Decrease timer by 5 minutes",className:"p-2 bg-primary text-white rounded-md hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx($,{size:16})}),e.jsx("span",{className:"text-sm font-medium min-w-20 text-center",children:"Adjust Â±5min"}),e.jsx("button",{onClick:()=>u(5),disabled:r,"aria-label":"Increase timer by 5 minutes",className:"p-2 bg-primary text-white rounded-md hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(O,{size:16})})]}),e.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[[5,15,25,45].map(o=>e.jsxs("button",{onClick:()=>p(o),disabled:r,"aria-label":`Set timer to ${o} minutes`,className:"px-3 py-1 text-sm bg-primary text-white rounded-md hover:bg-primary/60 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[o,"m"]},o)),e.jsx("button",{onClick:()=>i(o=>!o),disabled:r,"aria-label":"Set custom timer",className:"px-3 py-1 text-sm bg-primary text-white rounded-md hover:bg-primary/60 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Custom"})]}),a&&!r&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[e.jsx("input",{type:"number",min:"1",max:"999",value:w||"",onChange:j,onKeyDown:o=>{o.key==="Enter"&&g()},className:"w-20 px-2 py-1 border border-input rounded-md text-center","aria-label":"Custom timer minutes",placeholder:"min",autoFocus:!0}),e.jsx("button",{onClick:g,className:"px-2 py-1 bg-green-500 text-white rounded-md hover:bg-green-600","aria-label":"Set custom timer",children:"Set"})]})]}),e.jsx("audio",{ref:b,src:"https://cdn.pixabay.com/audio/2022/07/26/audio_124bfae1b6.mp3",preload:"auto"})]})}function V(){const[c,d]=t.useState(new Date);return t.useEffect(()=>{let s;const x=()=>{d(new Date),s=requestAnimationFrame(x)};return s=requestAnimationFrame(x),()=>cancelAnimationFrame(s)},[]),e.jsx(P,{children:e.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[e.jsx(D,{}),e.jsx("main",{className:"mt-15 flex-1 container mx-auto px-4 py-8",children:e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold mb-8 text-center",children:"Clock & Timer"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs(N.section,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"bg-card rounded-lg p-8 text-center shadow-md flex flex-col gap-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Current Time"}),e.jsx(J,{currentTime:c,formatTime:E,formatDate:M}),e.jsx(U,{})]}),e.jsx(B,{})]}),e.jsx(W,{})]})}),e.jsx(z,{})]})})}export{V as default};
