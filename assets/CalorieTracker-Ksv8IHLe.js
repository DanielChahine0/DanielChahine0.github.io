import{j as e,e as I,r,P as T,N as M,F as E}from"./index-B_BAhOpn.js";import{C as $}from"./calculator-CVQXrUNL.js";import{P as R}from"./plus-dWE6c4mJ.js";import{T as O}from"./trash-2-BBcxfDYF.js";function A({formData:t,errors:a,activityLevels:o,goals:c,isFormValid:n,onInputChange:s,onCalculate:u,onReset:m}){return e.jsxs("form",{className:"bg-card rounded-xl p-6 mb-8 shadow-md",onSubmit:l=>{l.preventDefault(),u()},autoComplete:"off",children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx($,{size:22})," Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"unit",className:"block text-sm font-medium mb-1",children:"Unit System"}),e.jsxs("select",{id:"unit",value:t.unit,onChange:l=>s("unit",l.target.value),className:"w-full px-3 py-2 border rounded-md bg-background focus:ring focus:ring-blue-500",children:[e.jsx("option",{value:"metric",children:"Metric (kg, cm)"}),e.jsx("option",{value:"imperial",children:"Imperial (lbs, inches)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium mb-1",children:"Gender"}),e.jsxs("select",{id:"gender",value:t.gender,onChange:l=>s("gender",l.target.value),className:"w-full px-3 py-2 border rounded-md bg-background focus:ring focus:ring-blue-500",children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"age",className:"block text-sm font-medium mb-1",children:"Age (years)"}),e.jsx("input",{id:"age",type:"number",value:t.age,onChange:l=>s("age",l.target.value),className:`w-full px-3 py-2 border rounded-md bg-background ${a.age?"border-red-500":""}`,placeholder:"e.g. 30",min:"1",max:"120",step:"1",required:!0}),a.age&&e.jsx("span",{className:"text-xs text-red-500",children:a.age})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"weight",className:"block text-sm font-medium mb-1",children:["Weight (",t.unit==="metric"?"kg":"lbs",")"]}),e.jsx("input",{id:"weight",type:"number",value:t.weight,onChange:l=>s("weight",l.target.value),className:`w-full px-3 py-2 border rounded-md bg-background ${a.weight?"border-red-500":""}`,placeholder:t.unit==="metric"?"e.g. 70":"e.g. 154",min:"1",max:"1000",step:"0.1",required:!0}),a.weight&&e.jsx("span",{className:"text-xs text-red-500",children:a.weight})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{htmlFor:"height",className:"block text-sm font-medium mb-1",children:["Height (",t.unit==="metric"?"cm":"inches",")"]}),e.jsx("input",{id:"height",type:"number",value:t.height,onChange:l=>s("height",l.target.value),className:`w-full px-3 py-2 border rounded-md bg-background ${a.height?"border-red-500":""}`,placeholder:t.unit==="metric"?"e.g. 175":"e.g. 69",min:"1",max:t.unit==="metric"?300:120,step:"0.1",required:!0}),a.height&&e.jsx("span",{className:"text-xs text-red-500",children:a.height})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"activityLevel",className:"block text-sm font-medium mb-1",children:"Activity Level"}),e.jsx("select",{id:"activityLevel",value:t.activityLevel,onChange:l=>s("activityLevel",l.target.value),className:"w-full px-3 py-2 border rounded-md bg-background focus:ring focus:ring-blue-500",children:Object.entries(o).map(([l,g])=>e.jsx("option",{value:l,children:g.label},l))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"goal",className:"block text-sm font-medium mb-1",children:"Goal"}),e.jsx("select",{id:"goal",value:t.goal,onChange:l=>s("goal",l.target.value),className:"w-full px-3 py-2 border rounded-md bg-background focus:ring focus:ring-blue-500",children:Object.entries(c).map(([l,g])=>e.jsx("option",{value:l,children:g.label},l))})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-start mt-6",children:[e.jsx("button",{type:"submit",disabled:!n,className:`px-6 py-2 rounded-md text-white font-medium transition-colors ${n?"bg-primary hover:bg-primary/60":"bg-primary/25 cursor-not-allowed"}`,children:"Calculate"}),e.jsx("button",{type:"button",onClick:m,className:"px-6 py-2 rounded-md bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium",children:"Reset"})]})]})}function G({results:t}){return t?e.jsxs("div",{className:"bg-card p-6 rounded-xl mb-8 shadow-sm",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Results"}),e.jsxs("p",{className:"mb-1",children:["BMR: ",t.bmr," calories/day"]}),e.jsxs("p",{className:"mb-1",children:["TDEE: ",t.tdee," calories/day"]}),e.jsxs("p",{className:"mb-1",children:["Recommended intake: ",t.targetCalories," calories/day"]}),e.jsxs("p",{className:"text-sm text-primary",children:["Goal: ",t.goal," · Activity: ",t.activityLevel]})]}):null}function P({dailyIntake:t,newFood:a,newCalories:o,totalConsumed:c,onNewFoodChange:n,onNewCaloriesChange:s,onAddFoodItem:u,onClearIntake:m}){return e.jsxs("div",{className:"bg-card p-6 rounded-xl mb-8 shadow-sm",children:[e.jsxs("h2",{className:"text-2xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(R,{size:20})," Daily Intake"]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[e.jsx("input",{type:"text",value:a,onChange:l=>n(l.target.value),placeholder:"Food name",className:"flex-1 px-3 py-2 border rounded-md bg-background"}),e.jsx("input",{type:"number",value:o,onChange:l=>s(l.target.value),placeholder:"Calories",className:"w-32 px-3 py-2 border rounded-md bg-background",min:"1"}),e.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 rounded-md bg-primary text-white hover:bg-primary/60",children:"Add"})]}),t.length>0?e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"mb-4",children:t.map((l,g)=>e.jsxs("li",{className:"flex justify-between py-1 border-b border-border/20",children:[e.jsx("span",{children:l.food}),e.jsxs("span",{children:[l.calories," cal"]})]},g))}),e.jsxs("p",{className:"font-medium mb-4",children:["Total consumed: ",c," calories"]}),e.jsxs("button",{type:"button",onClick:m,className:"px-4 py-2 rounded-md bg-red-500 text-white hover:bg-red-600 flex items-center gap-1",children:[e.jsx(O,{size:16})," Clear Log"]})]}):e.jsx("p",{className:"text-sm text-gray-500",children:"No items added yet."})]})}const z={sedentary:{label:"Sedentary (little/no exercise)",multiplier:1.2},light:{label:"Light activity (1–3 days/week)",multiplier:1.375},moderate:{label:"Moderate activity (3–5 days/week)",multiplier:1.55},very:{label:"Very active (6–7 days/week)",multiplier:1.725},extra:{label:"Extra active (physical job)",multiplier:1.9}},J={lose2:{label:"Lose 2 lbs/week",adjustment:-1e3},lose1:{label:"Lose 1 lb/week",adjustment:-500},lose0_5:{label:"Lose 0.5 lb/week",adjustment:-250},maintain:{label:"Maintain weight",adjustment:0},gain0_5:{label:"Gain 0.5 lb/week",adjustment:250},gain1:{label:"Gain 1 lb/week",adjustment:500}},q=t=>{const a={},o=parseFloat(t.age);(!t.age||isNaN(o)||o<1||o>120||o!==Math.floor(o))&&(a.age="Enter a valid age (1–120, whole numbers only).");const c=parseFloat(t.weight);(!t.weight||isNaN(c)||c<=0||c>1e3)&&(a.weight=`Enter a valid weight (0–1000 ${t.unit==="metric"?"kg":"lbs"}).`);const n=parseFloat(t.height),s=t.unit==="metric"?300:120;return(!t.height||isNaN(n)||n<=0||n>s)&&(a.height=`Enter a valid height (0–${s} ${t.unit==="metric"?"cm":"inches"}).`),a},B=(t,a,o)=>{let c=parseFloat(t.weight),n=parseFloat(t.height);t.unit==="imperial"&&(c=c*.453592,n=n*2.54);let s;t.gender==="male"?s=10*c+6.25*n-5*parseInt(t.age,10)+5:s=10*c+6.25*n-5*parseInt(t.age,10)-161;const u=s*a[t.activityLevel].multiplier,m=Math.max(u+o[t.goal].adjustment,1200);return{bmr:Math.round(s),tdee:Math.round(u),targetCalories:Math.round(m),goal:o[t.goal].label,activityLevel:a[t.activityLevel].label}};function V(){const{toast:t}=I(),[a,o]=r.useState({age:"",gender:"male",weight:"",height:"",activityLevel:"sedentary",goal:"maintain",unit:"metric"}),[c,n]=r.useState(null),[s,u]=r.useState({}),[m,l]=r.useState([]),[g,j]=r.useState(""),[b,y]=r.useState("");r.useEffect(()=>{try{const i=localStorage.getItem("calorieTrackerFormData"),d=localStorage.getItem("calorieTrackerDailyIntake");i&&o(h=>({...h,...JSON.parse(i)})),d&&l(JSON.parse(d))}catch(i){console.error("CalorieTracker load error:",i)}},[]),r.useEffect(()=>{try{localStorage.setItem("calorieTrackerFormData",JSON.stringify(a)),localStorage.setItem("calorieTrackerDailyIntake",JSON.stringify(m))}catch(i){console.error("CalorieTracker persist error:",i)}},[a,m]);const p=r.useMemo(()=>z,[]),v=r.useMemo(()=>J,[]),x=r.useCallback(i=>q(i),[]),f=r.useCallback((i,d)=>{o(h=>{const N={...h,[i]:d};return c&&n(null),u(x(N)),N})},[c,x]),k=r.useCallback(()=>{const i=x(a);if(u(i),Object.keys(i).length>0)return;const d=B(a,p,v);n(d)},[a,x,p,v]),w=r.useCallback(()=>{o({age:"",gender:"male",weight:"",height:"",activityLevel:"sedentary",goal:"maintain",unit:"metric"}),n(null),u({})},[]),C=r.useCallback(()=>{const i=g.trim(),d=parseFloat(b);if(!i||isNaN(d)||d<=0){t({variant:"destructive",title:"Invalid entry",description:"Please enter a food name and a positive calorie value."});return}l(h=>[...h,{food:i,calories:d}]),j(""),y(""),t({title:"Item added",description:`${i} (${d} cal) recorded.`})},[g,b,t]),F=r.useCallback(()=>{l([]),t({title:"Log cleared",description:"Daily intake log has been reset."})},[t]),L=r.useMemo(()=>m.reduce((i,d)=>i+d.calories,0),[m]),S=r.useMemo(()=>Object.keys(s).length===0&&a.age&&a.weight&&a.height,[s,a.age,a.weight,a.height]);return e.jsx(T,{children:e.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[e.jsx(M,{}),e.jsx("main",{className:"mt-15 flex-1 container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 text-center","aria-label":"Calorie Calculator",children:"Calorie Calculator & Tracker"}),e.jsx(A,{formData:a,errors:s,activityLevels:p,goals:v,isFormValid:S,onInputChange:f,onCalculate:k,onReset:w}),e.jsx(G,{results:c}),e.jsx(P,{dailyIntake:m,newFood:g,newCalories:b,totalConsumed:L,onNewFoodChange:j,onNewCaloriesChange:y,onAddFoodItem:C,onClearIntake:F})]})}),e.jsx(E,{})]})})}export{V as default};
